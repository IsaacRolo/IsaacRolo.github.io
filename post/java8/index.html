<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    

    <title>关于lambda表达式和Stream API的思考 | Rolo的日常</title>
    <meta property="og:title" content="关于lambda表达式和Stream API的思考 - Rolo的日常">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2019-06-12T16:46:30&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2019-06-12T16:46:30&#43;08:00'>
        
    <meta name="Keywords" content="golang,go语言,go语言笔记,飞雪无情,java,android,博客,项目管理,python,软件架构,公众号,小程序">
    <meta name="description" content="关于lambda表达式和Stream API的思考">
        
    <meta name="author" content="Rolo">
    <meta property="og:url" content="https://isaacrolo.github.io/post/java8/">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
        <link rel="stylesheet" href='/css/douban.css'>
    
        <link rel="stylesheet" href='/css/other.css'>
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://isaacrolo.github.io/">
                        Rolo的日常
                    </a>
                
                <p class="description">Laziness, Impatience, and Hubris</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://isaacrolo.github.io/">首页</a>
                    
                    <a  href="https://isaacrolo.github.io/system/" title="知识体系">知识体系</a>
                    
                    <a  href="https://isaacrolo.github.io/archives/" title="归档">归档</a>
                    
                    <a  href="https://isaacrolo.github.io/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: fixed;
        width: 200px;
        margin-left: -210px;
        padding: 5px 10px;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        border: 1px solid rgba(0, 0, 0, .07);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
        background-clip: padding-box;
        -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        word-wrap: break-word;
        white-space: nowrap;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        z-index: 999;
        cursor: pointer;
        max-height: 70%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 20px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 20px;
        list-style: square;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="position: absolute; top: 188px;">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#lambda表达式">Lambda表达式</a>
      <ul>
        <li></li>
        <li><a href="#函数式编程java-中的一种更轻松的函数式编程途径httpswwwibmcomdeveloperworkscnjavaj-java8idioms1indexhtml">函数式编程【<a href="https://www.ibm.com/developerworks/cn/java/j-java8idioms1/index.html">Java 中的一种更轻松的函数式编程途径</a>】</a></li>
        <li><a href="#函数式接口">函数式接口</a></li>
        <li><a href="#4大内置函数式接口">4大内置函数式接口</a></li>
        <li><a href="#方法引用">方法引用</a></li>
        <li><a href="#构造器引用和数组引用">构造器引用和数组引用</a></li>
      </ul>
    </li>
    <li><a href="#stream-api">Stream API</a>
      <ul>
        <li><a href="#流的概念">流的概念</a></li>
        <li><a href="#使用流的好处">使用流的好处</a></li>
      </ul>
    </li>
    <li><a href="#对比传统实现">对比传统实现</a></li>
    <li><a href="#参考资料">参考资料</a></li>
  </ul>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            var leftPos = $("#main").offset().left;
            if(leftPos<220){
                postToc.css({"width":leftPos-10,"margin-left":(0-leftPos)})
            }

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title">关于lambda表达式和Stream API的思考</h1>
        </header>
        <date class="post-meta meta-date">
            2019年6月12日
        </date>
        
        <div class="post-meta">
            <span>|</span>
            
            <span class="meta-category"><a href='/categories/'></a></span>
            
        </div>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            <h2 id="lambda表达式">Lambda表达式</h2>
<hr>
<h5 id="语法格式">语法格式</h5>
<p>（抽象方法的参数列表）-&gt; {抽象方法的实现}</p>
<h5 id="首先来看看我们能在什么地方使用lambda表达式">首先来看看我们能在什么地方使用lambda表达式？</h5>
<ul>
<li>
<p>任何需要函数式接口的地方，都可以传入lambda表达式来代替匿名内部类</p>
<p>Thread构造函数中的Runnable接口 <code>Thread thread=new Thread(new Runnable(){});</code></p>
<p>给集合排序的Comparator接口 <code>Collections.sort(list, new Comparator&lt;JSONObject&gt;() {});</code></p>
</li>
<li>
<p>stream api 需要传入函数式接口作为参数</p>
</li>
<li>
<p>lambda在部分情况下应该使用方法引用来代替</p>
</li>
</ul>
<h3 id="函数式编程java-中的一种更轻松的函数式编程途径httpswwwibmcomdeveloperworkscnjavaj-java8idioms1indexhtml">函数式编程【<a href="https://www.ibm.com/developerworks/cn/java/j-java8idioms1/index.html">Java 中的一种更轻松的函数式编程途径</a>】</h3>
<hr>
<p>命令式、声明式和函数式编程的联系见下图</p>
<p>
        <img class="mx-auto" alt="命令式、声明式和函数式编程的联系" src="https://i.loli.net/2019/10/09/Esj28gwkXvzlWeD.png" />   
    </p>
<ul>
<li>
<p>命令式编程</p>
<p>需要定义程序的每一步，并为我们提供了完全的控制权</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">findNemo</span><span style="color:#000;font-weight:bold">(</span>List<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">&gt;</span> names<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#458;font-weight:bold">boolean</span> found <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">false</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">for</span><span style="color:#000;font-weight:bold">(</span>String name <span style="color:#000;font-weight:bold">:</span> names<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>name<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">equals</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;Nemo&#34;</span><span style="color:#000;font-weight:bold">))</span> <span style="color:#000;font-weight:bold">{</span>
        found <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">true</span><span style="color:#000;font-weight:bold">;</span>
        <span style="color:#000;font-weight:bold">break</span><span style="color:#000;font-weight:bold">;</span>
      <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>
       
    <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>found<span style="color:#000;font-weight:bold">)</span>
      System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;Found Nemo&#34;</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">else</span>
      System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;Sorry, Nemo not found&#34;</span><span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000;font-weight:bold">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>声明式编程</p>
<p>我们仍会告诉程序要做什么，但将实现细节留给底层</p>
<p>在声明式编程中，我们无需关心<code>contains()</code> 的实现，只要它完成功能即可。花更少的精力获得同样的结果。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">findNemo</span><span style="color:#000;font-weight:bold">(</span>List<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">&gt;</span> names<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>names<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">contains</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;Nemo&#34;</span><span style="color:#000;font-weight:bold">))</span>
    System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;Found Nemo&#34;</span><span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000;font-weight:bold">else</span>
    System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;Sorry, Nemo not found&#34;</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>函数式编程</p>
<p>函数式编程=声明式编程+高阶函数【可以接收、创建或返回函数的函数或方法被视为高阶函数】</p>
<ul>
<li>
<p>函数式编程的好处</p>
<p>代码简洁，更富于表达，不易出错，更容易并行化，通常比面向对象的代码更易理解</p>
</li>
<li>
<p>如何将编程思维从命令式编程转换到函数式编程</p>
<p>关注想要程序实现的<em>目的</em> 而不是关注希望它执行的<em>方式</em>，从 “如何做” 转变为 “做什么”。扫描 JDK 库，寻找一个完成给定任务的内置方法。</p>
</li>
</ul>
<p>下面的代码展示了命令式编程 是如何转化为 函数式编程的</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#998;font-style:italic">//命令式编程
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">incrementPageVisit</span><span style="color:#000;font-weight:bold">(</span>Map<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">,</span> Integer<span style="color:#000;font-weight:bold">&gt;</span> pageVisits<span style="color:#000;font-weight:bold">,</span> String page<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(!</span>pageVisits<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">containsKey</span><span style="color:#000;font-weight:bold">(</span>page<span style="color:#000;font-weight:bold">))</span> <span style="color:#000;font-weight:bold">{</span>
       pageVisits<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span>page<span style="color:#000;font-weight:bold">,</span> 0<span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">}</span>
    pageVisits<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span>page<span style="color:#000;font-weight:bold">,</span> pageVisits<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">get</span><span style="color:#000;font-weight:bold">(</span>page<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">+</span> 1<span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000;font-weight:bold">}</span>
  
<span style="color:#998;font-style:italic">//函数式编程
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">incrementPageVisit</span><span style="color:#000;font-weight:bold">(</span>Map<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">,</span> Integer<span style="color:#000;font-weight:bold">&gt;</span> pageVisits<span style="color:#000;font-weight:bold">,</span> String page<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    pageVisits<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">merge</span><span style="color:#000;font-weight:bold">(</span>page<span style="color:#000;font-weight:bold">,</span> 1<span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">(</span>oldValue<span style="color:#000;font-weight:bold">,</span> value<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">-&gt;</span> oldValue <span style="color:#000;font-weight:bold">+</span> value<span style="color:#000;font-weight:bold">);</span> 
<span style="color:#000;font-weight:bold">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h4 id="语句和表达式集合管道模式">语句和表达式（集合管道模式）</h4>
<p>函数式编程中常用的两种设计模式：<em>函数组合</em>和<em>集合管道</em>，当一个数据集合流经一个函数组合时，它就变成一个集合管道</p>
<p>下面通过实例来理解使用集合管道进行迭代和排序的好处</p>
<p>获取 2000 年后制造的汽车的名称。然后按年份对这些型号进行升序排序。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#998;font-style:italic">//使用语句进行迭代和排序
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> List<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#900;font-weight:bold">getModelsAfter2000UsingFor</span><span style="color:#000;font-weight:bold">(</span>List<span style="color:#000;font-weight:bold">&lt;</span>Car<span style="color:#000;font-weight:bold">&gt;</span> cars<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    List<span style="color:#000;font-weight:bold">&lt;</span>Car<span style="color:#000;font-weight:bold">&gt;</span> carsSortedByYear <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> ArrayList<span style="color:#000;font-weight:bold">&lt;&gt;();</span>
 
    <span style="color:#998;font-style:italic">//2000 年后制造
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">for</span><span style="color:#000;font-weight:bold">(</span>Car car <span style="color:#000;font-weight:bold">:</span> cars<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>car<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getYear</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">&gt;</span> 2000<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        carsSortedByYear<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span>car<span style="color:#000;font-weight:bold">);</span>
      <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>
     
    <span style="color:#998;font-style:italic">//按年份升序排序
</span><span style="color:#998;font-style:italic"></span>    Collections<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">sort</span><span style="color:#000;font-weight:bold">(</span>carsSortedByYear<span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">new</span> Comparator<span style="color:#000;font-weight:bold">&lt;</span>Car<span style="color:#000;font-weight:bold">&gt;()</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">compare</span><span style="color:#000;font-weight:bold">(</span>Car car1<span style="color:#000;font-weight:bold">,</span> Car car2<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">new</span> Integer<span style="color:#000;font-weight:bold">(</span>car1<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getYear</span><span style="color:#000;font-weight:bold">()).</span><span style="color:#008080">compareTo</span><span style="color:#000;font-weight:bold">(</span>car2<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getYear</span><span style="color:#000;font-weight:bold">());</span>
      <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">});</span>
     
    <span style="color:#998;font-style:italic">//获取型号集合
</span><span style="color:#998;font-style:italic"></span>    List<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">&gt;</span> models <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> ArrayList<span style="color:#000;font-weight:bold">&lt;&gt;();</span>
    <span style="color:#000;font-weight:bold">for</span><span style="color:#000;font-weight:bold">(</span>Car car <span style="color:#000;font-weight:bold">:</span> carsSortedByYear<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
      models<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span>car<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getModel</span><span style="color:#000;font-weight:bold">());</span>
    <span style="color:#000;font-weight:bold">}</span>
     
    <span style="color:#000;font-weight:bold">return</span> models<span style="color:#000;font-weight:bold">;</span>
  <span style="color:#000;font-weight:bold">}</span>
</code></pre></td></tr></table>
</div>
</div><p>使用语句的缺点在于代码中有许多循环；包含不必要的垃圾变量</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#998;font-style:italic">//使用集合管道进行迭代和排序
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> List<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#900;font-weight:bold">getModelsAfter2000UsingPipeline</span><span style="color:#000;font-weight:bold">(</span>
   List<span style="color:#000;font-weight:bold">&lt;</span>Car<span style="color:#000;font-weight:bold">&gt;</span> cars<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
   <span style="color:#000;font-weight:bold">return</span> 
     cars<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">stream</span><span style="color:#000;font-weight:bold">()</span>
         <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">filter</span><span style="color:#000;font-weight:bold">(</span>car <span style="color:#000;font-weight:bold">-&gt;</span> car<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getYear</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">&gt;</span> 2000<span style="color:#000;font-weight:bold">)</span>
         <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">sorted</span><span style="color:#000;font-weight:bold">(</span>Comparator<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">comparing</span><span style="color:#000;font-weight:bold">(</span>Car<span style="color:#000;font-weight:bold">::</span>getYear<span style="color:#000;font-weight:bold">))</span>
         <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">map</span><span style="color:#000;font-weight:bold">(</span>Car<span style="color:#000;font-weight:bold">::</span>getModel<span style="color:#000;font-weight:bold">)</span>
         <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">collect</span><span style="color:#000;font-weight:bold">(</span>toList<span style="color:#000;font-weight:bold">());</span>
 <span style="color:#000;font-weight:bold">}</span>
</code></pre></td></tr></table>
</div>
</div><p>集合管道模式给定输入，让数据从上游流到下游，并经历一系列函数转换。</p>
<p>随着数据流经各个函数，Java 8 的惰性计算和函数融合功能可帮助避免在某些情况下创建中间对象。</p>
<h3 id="函数式接口">函数式接口</h3>
<hr>
<p>e.g.：Runnable Consumer Comparator</p>
<p>有且只有<strong>一个抽象方法</strong>的接口。</p>
<p><strong>函数式接口</strong>可以被转换为lambda表达式；java8以前使用匿名内部类实现</p>
<p>用@FunctionalInterface注解修饰</p>
<h3 id="4大内置函数式接口">4大内置函数式接口</h3>
<hr>
<p>在<code>java.util.function</code> 包中定义</p>
<p>消费</p>
<p>stream( ).foreach( )作为参数</p>
<pre><code>Comsumer&lt;T&gt;
void accept(T t)
</code></pre><p>供给</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">Supplier<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span>
T <span style="color:#900;font-weight:bold">get</span><span style="color:#000;font-weight:bold">()</span>
</code></pre></td></tr></table>
</div>
</div><p>函数</p>
<p>stream( ).map( )作为参数</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">Function<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">,</span>R<span style="color:#000;font-weight:bold">&gt;</span>
R <span style="color:#900;font-weight:bold">apply</span><span style="color:#000;font-weight:bold">(</span>T t<span style="color:#000;font-weight:bold">)</span>
</code></pre></td></tr></table>
</div>
</div><p>断言</p>
<p>stream( ).filter( )作为参数</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">Predicate<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#458;font-weight:bold">boolean</span> <span style="color:#900;font-weight:bold">test</span><span style="color:#000;font-weight:bold">(</span>T t<span style="color:#000;font-weight:bold">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="方法引用">方法引用</h3>
<hr>
<p>什么时候考虑使用方法引用？</p>
<p>一个 lambda 表达式的唯一目的是将形参传递给其他函数【传递 lambda 表达式，没有实际执行工作】</p>
<p>Lambda体中有方法已经实现了，可以使用方法引用代替lambda表达式</p>
<p>lambda体中方法的参数和返回值类型 需要和 函数式接口中抽象方法的参数和返回值类型保持一致</p>
<ul>
<li>
<p>对象::实例方法名</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">Consumer<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">&gt;</span> con<span style="color:#000;font-weight:bold">=(</span>x<span style="color:#000;font-weight:bold">)-&gt;</span>System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">,</span>printlin<span style="color:#000;font-weight:bold">(</span>x<span style="color:#000;font-weight:bold">);</span>
Consumer<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">&gt;</span> con<span style="color:#000;font-weight:bold">=</span>System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">::</span>printlin<span style="color:#000;font-weight:bold">;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>类::静态方法名</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">Comparator<span style="color:#000;font-weight:bold">&lt;</span>Integer<span style="color:#000;font-weight:bold">&gt;</span> com<span style="color:#000;font-weight:bold">=(</span>x<span style="color:#000;font-weight:bold">,</span>y<span style="color:#000;font-weight:bold">)-&gt;</span>Integer<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">compare</span><span style="color:#000;font-weight:bold">(</span>x<span style="color:#000;font-weight:bold">,</span>y<span style="color:#000;font-weight:bold">);</span>
Comparator<span style="color:#000;font-weight:bold">&lt;</span>Integer<span style="color:#000;font-weight:bold">&gt;</span> com<span style="color:#000;font-weight:bold">=</span>Integer<span style="color:#000;font-weight:bold">::</span>compare<span style="color:#000;font-weight:bold">;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>类::实例方法名</p>
<ul>
<li>
<p>lambda表达式的参数是实例方法的调用者</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">(</span>userModel<span style="color:#000;font-weight:bold">)-&gt;</span>userModel<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getName</span><span style="color:#000;font-weight:bold">()</span>
<span style="color:#900;font-weight:bold">UserModel:</span><span style="color:#000;font-weight:bold">:</span>getName<span style="color:#000;font-weight:bold">()</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>第一个参数是实例方法的调用者，第二个参数式实例方法的参数</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">BiPredicate<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">,</span>String<span style="color:#000;font-weight:bold">&gt;</span> bp<span style="color:#000;font-weight:bold">=(</span>x<span style="color:#000;font-weight:bold">,</span>y<span style="color:#000;font-weight:bold">)-&gt;</span>x<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">equals</span><span style="color:#000;font-weight:bold">(</span>y<span style="color:#000;font-weight:bold">);</span>
BiPredicate<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">,</span>String<span style="color:#000;font-weight:bold">&gt;</span> bp<span style="color:#000;font-weight:bold">=</span>String<span style="color:#000;font-weight:bold">::</span>equals
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
</ul>
<h3 id="构造器引用和数组引用">构造器引用和数组引用</h3>
<hr>
<p>调用类的哪个构造器取决于函数式接口<strong>抽象方法的参数</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#998;font-style:italic">//构造器引用
</span><span style="color:#998;font-style:italic"></span>Supplier<span style="color:#000;font-weight:bold">&lt;</span>Emp<span style="color:#000;font-weight:bold">&gt;</span> sup<span style="color:#000;font-weight:bold">=()-&gt;</span><span style="color:#000;font-weight:bold">new</span> Emp<span style="color:#000;font-weight:bold">();</span>
Supplier<span style="color:#000;font-weight:bold">&lt;</span>Emp<span style="color:#000;font-weight:bold">&gt;</span> sup<span style="color:#000;font-weight:bold">=</span>Emp<span style="color:#000;font-weight:bold">::</span><span style="color:#000;font-weight:bold">new</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#998;font-style:italic">//数组引用
</span><span style="color:#998;font-style:italic"></span>Funcion<span style="color:#000;font-weight:bold">&lt;</span>Integer<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">Stringp</span><span style="color:#000;font-weight:bold">[]&gt;</span> fun <span style="color:#000;font-weight:bold">=(</span>x<span style="color:#000;font-weight:bold">)-&gt;</span><span style="color:#000;font-weight:bold">new</span> String<span style="color:#000;font-weight:bold">[</span>x<span style="color:#000;font-weight:bold">];</span>
Funcion<span style="color:#000;font-weight:bold">&lt;</span>Integer<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">Stringp</span><span style="color:#000;font-weight:bold">[]&gt;</span> fun <span style="color:#000;font-weight:bold">=</span>String<span style="color:#000;font-weight:bold">[]::</span><span style="color:#000;font-weight:bold">new</span><span style="color:#000;font-weight:bold">;</span>
String<span style="color:#000;font-weight:bold">[]</span> str<span style="color:#000;font-weight:bold">=</span>fun<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">apply</span><span style="color:#000;font-weight:bold">(</span>20<span style="color:#000;font-weight:bold">);</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="stream-api">Stream API</h2>
<hr>
<h3 id="流的概念">流的概念</h3>
<p>Java 8 中的 Stream 是对集合（Collection）对象功能的增强，它专注于对集合对象进行各种非常便利、高效的<strong>聚合操作</strong>（aggregate operation），或者<strong>大批量数据</strong>操作 (bulk data operation)。</p>
<p>Stream 不是集合元素，它不是数据结构并不保存数据，它是有关算法和<strong>计算</strong>的，它更像一个高级版本的 Iterator。原始版本的 Iterator，用户只能显式地一个一个遍历元素并对其执行某些操作；高级版本的 Stream，用户只要给出需要对其包含的元素执行什么操作，比如 “过滤掉长度大于 10 的字符串”、“获取每个字符串的首字母”等，Stream 会隐式地在内部进行遍历，做出相应的数据转换。</p>
<h3 id="使用流的好处">使用流的好处</h3>
<ul>
<li>提高编程效率和程序可读性</li>
<li>对<strong>集合</strong>对象进行各种非常便利、高效的聚合操作，无需多次<strong>集合的遍历</strong></li>
<li>迭代器只能命令式地、串行化操作；流提供串行和并行【<strong>parallelStream</strong>】两种模式进行汇聚操作，程序执行速度更快</li>
</ul>
<h2 id="对比传统实现">对比传统实现</h2>
<hr>
<p>List排序</p>
<p><a href="https://my.oschina.net/HJCui/blog/1573344">https://my.oschina.net/HJCui/blog/1573344</a></p>
<p>遍历map</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#998;font-style:italic">//传统方式
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span>Map<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">Entry</span><span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">,</span>Object<span style="color:#000;font-weight:bold">&gt;</span> entry<span style="color:#000;font-weight:bold">:</span>sourceAsMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">entrySet</span><span style="color:#000;font-weight:bold">()){</span>
    System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;Item : &#34;</span> <span style="color:#000;font-weight:bold">+</span> entry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getKey</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">+</span> <span style="color:#d14">&#34; Count : &#34;</span> <span style="color:#000;font-weight:bold">+</span> entry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getValue</span><span style="color:#000;font-weight:bold">());</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#998;font-style:italic">//lambda
</span><span style="color:#998;font-style:italic"></span>sourceAsMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">forEach</span><span style="color:#000;font-weight:bold">((</span>k<span style="color:#000;font-weight:bold">,</span>v<span style="color:#000;font-weight:bold">)-&gt;{</span>
    System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;k &#34;</span><span style="color:#000;font-weight:bold">+</span>k<span style="color:#000;font-weight:bold">+</span><span style="color:#d14">&#34;;v &#34;</span><span style="color:#000;font-weight:bold">+</span>v<span style="color:#000;font-weight:bold">);</span>
<span style="color:#000;font-weight:bold">});</span>
</code></pre></td></tr></table>
</div>
</div><p>Q:多次遍历会不会影响效率</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">List<span style="color:#000;font-weight:bold">&lt;</span>Date<span style="color:#000;font-weight:bold">&gt;</span> nameList <span style="color:#000;font-weight:bold">=</span> trendList<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">stream</span><span style="color:#000;font-weight:bold">()</span>
    <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">map</span><span style="color:#000;font-weight:bold">(</span>StaUnsafetyAirportDataModel<span style="color:#000;font-weight:bold">::</span>getcDate<span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">collect</span><span style="color:#000;font-weight:bold">(</span>Collectors<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">toList</span><span style="color:#000;font-weight:bold">());</span>
List<span style="color:#000;font-weight:bold">&lt;</span>Integer<span style="color:#000;font-weight:bold">&gt;</span> eventNum <span style="color:#000;font-weight:bold">=</span> trendList<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">stream</span><span style="color:#000;font-weight:bold">()</span>
    <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">map</span><span style="color:#000;font-weight:bold">(</span>StaUnsafetyAirportDataModel<span style="color:#000;font-weight:bold">::</span>getEventCt<span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">collect</span><span style="color:#000;font-weight:bold">(</span>Collectors<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">toList</span><span style="color:#000;font-weight:bold">());</span>
</code></pre></td></tr></table>
</div>
</div><p>Q:如何将一个对象的集合转化成另一个对象的集合【提取DTO中的部分属性到VO】</p>
<h2 id="参考资料">参考资料</h2>
<hr>
<p><a href="https://www.ibm.com/developerworks/cn/java/j-lo-java8streamapi/index.html">Java 8 中的 Streams API 详解</a></p>
<p><a href="https://www.ibm.com/developerworks/cn/views/global/libraryview.jsp?sort_by=&amp;show_abstract=true&amp;show_all=&amp;search_flag=&amp;contentarea_by=%E6%89%80%E6%9C%89%E4%B8%93%E5%8C%BA&amp;search_by=Java+8+%E4%B9%A0%E6%83%AF%E7%94%A8%E8%AF%AD&amp;product_by=-1&amp;topic_by=-1&amp;type_by=%E6%89%80%E6%9C%89%E7%B1%BB%E5%88%AB&amp;ibm-search=%E6%90%9C%E7%B4%A2">Java8习惯用语</a></p>

        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>原文作者：</strong><a rel="author" href="https://isaacrolo.github.io/">Rolo</a></li>
        <li style="word-break:break-all"><strong>原文链接：</strong><a href="https://isaacrolo.github.io/post/java8/">https://isaacrolo.github.io/post/java8/</a></li>
        <li><strong>版权声明：</strong>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li>
    </ul>
</div>
<br/>



        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/post/cookie_session/">Cookie_session</a></li>
        
        <li><a href="/post/jsoup/">Java爬虫—Jsoup</a></li>
        
        <li><a href="/post/zuul/">整合Zuul</a></li>
        
        <li><a href="/post/springboot-transfer/">SpringBoot 迁移</a></li>
        
        <li><a href="/post/HystrixDashboard/">整合HystrixDashboard和Turbine</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='/tags/'></a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2021 <a href="https://isaacrolo.github.io/">Rolo的日常 By Rolo</a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




    <script src='/js/douban.js'></script>

                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://isaacrolo.github.io/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://isaacrolo.github.io/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://isaacrolo.github.io/post/Mysql%E7%B4%A2%E5%BC%95%E5%8E%9F%E7%90%86%E4%B8%8E%E4%BC%98%E5%8C%96/" title="Mysql索引原理与优化">Mysql索引原理与优化</a>
    </li>
    
    <li>
        <a href="https://isaacrolo.github.io/post/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8/" title="区块链入门">区块链入门</a>
    </li>
    
    <li>
        <a href="https://isaacrolo.github.io/post/work-tips/" title="一份工作中最重要的5个要素">一份工作中最重要的5个要素</a>
    </li>
    
    <li>
        <a href="https://isaacrolo.github.io/post/Mysql%E9%80%BB%E8%BE%91%E6%9E%B6%E6%9E%84/" title="高性能 MySQL ｜ MySQL 逻辑架构">高性能 MySQL ｜ MySQL 逻辑架构</a>
    </li>
    
    <li>
        <a href="https://isaacrolo.github.io/post/Schema%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BC%98%E5%8C%96/" title="高性能 MySQL ｜ Schema 与数据类型优化">高性能 MySQL ｜ Schema 与数据类型优化</a>
    </li>
    
    <li>
        <a href="https://isaacrolo.github.io/post/%E9%AB%98%E6%80%A7%E8%83%BD%E7%B4%A2%E5%BC%95/" title="高性能 MySQL ｜ 创建高性能的索引">高性能 MySQL ｜ 创建高性能的索引</a>
    </li>
    
    <li>
        <a href="https://isaacrolo.github.io/post/%E6%9F%A5%E8%AF%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" title="高性能 MySQL ｜ 查询性能优化">高性能 MySQL ｜ 查询性能优化</a>
    </li>
    
    <li>
        <a href="https://isaacrolo.github.io/post/16s/" title="魅族16s使用半年有感">魅族16s使用半年有感</a>
    </li>
    
    <li>
        <a href="https://isaacrolo.github.io/post/SQLInjection/" title="关于防止sql注入的思考">关于防止sql注入的思考</a>
    </li>
    
    <li>
        <a href="https://isaacrolo.github.io/post/Hadoop/" title="Hadoop">Hadoop</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href='/categories/'>分类</a></h3>
<ul class="widget-list">
    
    <li><a href="https://isaacrolo.github.io/categories/Database/">Database (6)</a></li>
    
    <li><a href="https://isaacrolo.github.io/categories/Spring-Cloud/">Spring Cloud (2)</a></li>
    
    <li><a href="https://isaacrolo.github.io/categories/web/">web (1)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>标签</a></h3>
<div class="tagcloud">
    
    <a href="https://isaacrolo.github.io/tags/BlockChain/">BlockChain</a>
    
    <a href="https://isaacrolo.github.io/tags/Elasticsearch/">Elasticsearch</a>
    
    <a href="https://isaacrolo.github.io/tags/Java/">Java</a>
    
    <a href="https://isaacrolo.github.io/tags/MySQL/">MySQL </a>
    
    <a href="https://isaacrolo.github.io/tags/Redis/">Redis</a>
    
    <a href="https://isaacrolo.github.io/tags/Spring-Boot/">Spring Boot</a>
    
    <a href="https://isaacrolo.github.io/tags/Spring-Cloud/">Spring Cloud</a>
    
    <a href="https://isaacrolo.github.io/tags/Tableau/">Tableau</a>
    
    <a href="https://isaacrolo.github.io/tags/web/">web</a>
    
    <a href="https://isaacrolo.github.io/tags/%E6%9D%82%E8%B0%88/">杂谈</a>
    
    <a href="https://isaacrolo.github.io/tags/%E7%BD%91%E7%BB%9C/">网络</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://isaacrolo.github.io/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>